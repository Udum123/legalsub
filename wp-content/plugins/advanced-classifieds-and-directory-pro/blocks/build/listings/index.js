(()=>{"use strict";var e={n:l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return e.d(t,{a:t}),t},d:(l,t)=>{for(var a in t)e.o(t,a)&&!e.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:t[a]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,t=window.wp.element,a=window.wp.serverSideRender;var n=e.n(a);const o=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.components,s=window.wp.hooks,c=window.wp.data;function u(e,l){var t,a,n={},o=[];for(a=0;a<e.length;a+=1)n[e[a].id]=a,e[a].children=[];for(a=0;a<e.length;a+=1)(t=e[a]).parent==l?o.push(t):n.hasOwnProperty(t.parent)&&e[n[t.parent]].children.push(t);return o}function d(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var a;for(a=0;a<e.length;a+=1)l.push({label:t+e[a].name,value:e[a].id}),e[a].children.length>0&&d(e[a].children,l,t.trim()+"--- ");return l}const p=JSON.parse('{"u2":"acadp/listings"}');(0,l.registerBlockType)(p.u2,{attributes:{view:{type:"string",default:acadp_blocks.listings.view},location:{type:"number",default:acadp_blocks.listings.location},category:{type:"number",default:acadp_blocks.listings.category},filterby:{type:"string",default:acadp_blocks.listings.filterby},orderby:{type:"string",default:acadp_blocks.listings.orderby},order:{type:"string",default:acadp_blocks.listings.order},columns:{type:"number",default:acadp_blocks.listings.columns},listings_per_page:{type:"number",default:acadp_blocks.listings.listings_per_page},featured:{type:"boolean",default:acadp_blocks.listings.featured},header:{type:"boolean",default:acadp_blocks.listings.header},pagination:{type:"boolean",default:acadp_blocks.listings.pagination}},edit:function(e){let{attributes:l,setAttributes:a}=e;const{view:p,category:_,location:g,filterby:b,orderby:m,order:h,columns:w,listings_per_page:f,featured:v,header:y,pagination:E}=l,C=(0,c.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_locations",{per_page:100});let t=[{label:"-- "+(0,o.__)("All locations")+" --",value:0}];if(l&&l.length>0){let e=d(u(l,parseInt(acadp_blocks.base_location)));t=[...t,...e]}return t})),k=(0,c.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_categories",{per_page:100});let t=[{label:"-- "+(0,o.__)("All categories")+" --",value:0}];if(l&&l.length>0){let e=d(u(l,0));t=[...t,...e]}return t})),R=(0,t.useRef)();return(0,t.useEffect)((()=>{R.current?(0,s.applyFilters)("acadp_block_listings_init",l):R.current=!0})),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(i.PanelBody,{title:(0,o.__)("Listings settings")},(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Select template"),value:p,options:[{label:(0,o.__)("List"),value:"list"},{label:(0,o.__)("Grid"),value:"grid"},{label:(0,o.__)("Map"),value:"map"}],onChange:e=>a({view:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Select location"),value:g,options:C,onChange:e=>a({location:Number(e)})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Select category"),value:_,options:k,onChange:e=>a({category:Number(e)})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Filter by"),value:b,options:[{label:(0,o.__)("None"),value:""},{label:(0,o.__)("Featured"),value:"featured"}],onChange:e=>a({filterby:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Order by"),value:m,options:[{label:(0,o.__)("Title"),value:"title"},{label:(0,o.__)("Date posted"),value:"date"},{label:(0,o.__)("Price"),value:"price"},{label:(0,o.__)("Views count"),value:"views"},{label:(0,o.__)("Random"),value:"rand"}],onChange:e=>a({orderby:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.SelectControl,{label:(0,o.__)("Order"),value:h,options:[{label:(0,o.__)("Ascending"),value:"asc"},{label:(0,o.__)("Descending"),value:"desc"}],onChange:e=>a({order:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.RangeControl,{label:(0,o.__)("Number of Columns"),value:w,min:1,max:12,onChange:e=>a({columns:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.RangeControl,{label:(0,o.__)("Number of listings"),help:(0,o.__)('Number of listings to show per page. Use a value of "0" to show all listings.'),value:f,min:1,max:100,onChange:e=>a({listings_per_page:e})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.ToggleControl,{label:(0,o.__)("Show featured"),help:(0,o.__)("Show or hide featured listings at the top of normal listings."),checked:v,onChange:()=>a({featured:!v})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.ToggleControl,{label:(0,o.__)("Show header"),help:(0,o.__)('The header section consist of the "Videos count", "Template switcher", and "Sort by" options.'),checked:y,onChange:()=>a({header:!y})})),(0,t.createElement)(i.PanelRow,null,(0,t.createElement)(i.ToggleControl,{label:(0,o.__)("Show pagination"),checked:E,onChange:()=>a({pagination:!E})})))),(0,t.createElement)("div",(0,r.useBlockProps)(),(0,t.createElement)(i.Disabled,null,(0,t.createElement)(n(),{block:"acadp/listings",attributes:l}))))}})})();