function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e){var t=function(t){this.el=t,this.$el=e(t),this.fields={},this.conditions=this.$el.data("rt-depends")||[],this.init()};t.prototype={init:function(){var e=this;e.conditions.length&&(e.$el.addClass("has-rt-dependent"),e.loadEvent())},loadEvent:function(){var t=this;t.conditions.map((function(a){a.map((function(a){var n='[data-id="_field_'+a.field+'"]';e(document.body).on("input change",n+" input, "+n+" select",(function(e){t.runValidation.apply(t,[e,a.field])})),e(n).find("input,select").each((function(){t.runValidation({target:this},a.field)}))}))}))},runValidation:function(t,a){var n=arguments,r=this,s=t.target,i=this.getField_type(s),u=s.value;if(void 0===r.fields[a])"checkbox"===i&&(u=s.checked?[u]:""),r.fields[a]={type:i,value:u};else if("checkbox"===i){var c=r.fields[a].value.indexOf(u);s.checked?-1===c&&r.fields[a].value.push(u):c>-1&&r.fields[a].value.splice(c,1)}else r.fields[a].value="radio"===i?e(document).find("input[type='radio'][name='"+s.getAttribute("name")+"']:checked").val():u;setTimeout((function(){r.userRule.apply(r,n)}),10)},userRule:function(){var e=this,t=[];e.conditions.map((function(a){var n=[];a.map((function(t){n.push(e.validated(t))})),t.push(n)})),t.map((function(e){return!e.includes(!1)})).includes(!0)?(e.$el.hasClass("row")?e.$el.css({display:"flex"}):e.$el.show(),e.$el.removeClass("rt-dependent-error"),e.$el.addClass("rt-dependent-valid")):(e.$el.removeClass("rt-dependent-valid"),e.$el.addClass("rt-dependent-error"),e.$el.find('input[type="checkbox"],input[type="radio"]').prop("checked",!1),e.$el.find('select, input[type="text"], input[type="number"], input[type="url"]').val("").trigger("change"),e.$el.hide())},validated:function(t){var a=this,n=0,r=(t.field,t.operator);if(void 0!==a.fields[t.field]){var s=a.fields[t.field];if("==empty"===r)n=Array.isArray(s.value)?!s.value.length:!s.value;else if("!=empty"===r)n=Array.isArray(s.value)?!!s.value.length:!!s.value;else{if("=="===r)return e.isNumeric(t.value)?a.isEqualToNumber(t.value,s.value):a.isEqualTo(t.value,s.value);if("!="===r)return e.isNumeric(t.value)?!a.isEqualToNumber(t.value,s.value):!a.isEqualTo(t.value,s.value);if("==pattern"===r)return a.matchesPattern(s.value,t.value);if("==contains"===r)return a.containsString(s.value,t.value)}}return n=0===n||1===n?!!n:n},getField_type:function(e){var t="",a=e.tagName;return e&&("INPUT"===a?t=e.type:"SELECT"===a&&(t="select")),t},parseString:function(e){return e?""+e:""},isEqualTo:function(e,t){return this.parseString(e).toLowerCase()===this.parseString(t).toLowerCase()},isEqualToNumber:function(e,t){return parseFloat(e)===parseFloat(t)},inArray:function(e,t){var a=this;return(t=t.map((function(e){return a.parseString(e)}))).indexOf(e)>-1},containsString:function(e,t){return this.parseString(e).indexOf(this.parseString(t))>-1},matchesPattern:function(e,t){var a=new RegExp(this.parseString(t),"gi");return this.parseString(e).match(a)}},window.rtclRenderCFfConditions=function(){e(document).find(".rtcl-cf-wrap[data-rt-depends]").each((function(){new t(this)}))},rtclRenderCFfConditions(),e.fn.rtFieldDependency=function(t){this._targets=e(this),this._settings=e.extend({attribute:"rt-depends",rules:{}},t);var a=this,n=function(e,t,a){if(void 0===a&&(a=!1),null==e&&(e=[]),1==a)return e.sort().join(",").toLowerCase()==t.sort().join(",").toLowerCase();for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1},r=function(t,a){return e.inArray(t,a)>=0&&e.isArray(a)},s=function(t){if("null"==typeof t||void 0===t)return!0;if("string"==typeof t)return""===e.trim(t);if("object"==(void 0===t?"undefined":_typeof(t))){if(e.isArray(t)){var a=e.map(t,(function(t,a){return""===e.trim(t)?null:t}));return e.isEmptyObject(a)}return e.isEmptyObject(t)}return!1};return this.typeRegExpDependency=function(t,a){if("undefined"==typeof useEvent&&(useEvent=!1),void 0===e(parent).prop("tagName"))return!1;var n=e(parent).prop("tagName").toLowerCase()+":"+e(parent).prop("type").toLowerCase(),r=e.trim(e(parent).val());switch(n){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":var s=void 0===a.modifier?"":a.modifier;new RegExp(a.pattern,s).test(r)?e(element).show():e(element).hide()}useEvent&&e(document.body).on("input",e(parent),(function(e){typeRegExpDependency(element,a,parent,!1)}))},this.typeEmptyDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var n=!1,r=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),i=e(t).val();switch(r){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":""===e.trim(i)&&(n=!0);break;case"input:checkbox":e(t).is(":checked")||""!==e.trim(i)||(n=!0);break;case"select:select-multiple":s(i)&&(n=!0)}return n},this.typeNotEmptyDependency=function(t,a){if(void 0===e(parent).prop("tagName"))return!1;var n=!1,r=e(parent).prop("tagName").toLowerCase()+":"+e(parent).prop("type").toLowerCase(),i=e(parent).val();switch(r){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":""!=e.trim(i)&&(n=!0);break;case"input:checkbox":e(parent).is(":checked")&&""!=e.trim(i)&&(n=!0);break;case"select:select-multiple":s(i)&&(n=!0)}return n},this.typeEqualDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var i=!1,u=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),c=e(t).val(),p=void 0!==a.like;if(a.empty=void 0!==a.empty&&a.empty,a.strict=void 0!==a.strict&&a.strict,p){var l=e(a.like).prop("tagName").toLowerCase()+":"+e(a.like).prop("type").toLowerCase();"input:checkbox"==l||"input:radio"==l?a.value=e(a.like+":checked").map((function(){return this.value})).get():(a.value=e(a.like).val(),showOnEmptyValue||(a.value=""==e.trim(e(a.like).val())?null:e(a.like).val()))}switch(u){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":(e.trim(c)===a.value||r(c,a.value)||""===e.trim(c)&&a.empty)&&(i=!0);break;case"input:checkbox":case"input:radio":var o=e(t+":checked").map((function(){return this.value})).get();(o===a.value||r(o,a.value)||n(o,a.value,a.strict)||s(o)&&a.empty)&&(i=!0);break;case"select:select-multiple":(n(value,a.value,a.strict)||null==c&&a.empty)&&(i=!0)}return i},this.typeNotEqualDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var i=!1,u=e(t).prop("tagName").toLowerCase()+":"+e(t).prop("type").toLowerCase(),c=e(t).val(),p=void 0!==a.like;if(a.strict=void 0!==a.strict&&a.strict,a.empty=void 0===a.empty||a.empty,p){var l=e(a.like).prop("tagName").toLowerCase()+":"+e(a.like).prop("type").toLowerCase();"input:checkbox"==l||"input:radio"==l?a.value=e(a.like+":checked").map((function(){return this.value})).get():(a.value=e(a.like).val(),showOnEmptyValue||(a.value=""==e.trim(e(a.like).val())?null:e(a.like).val()))}switch(u){case"input:text":case"input:password":case"input:number":case"input:date":case"input:email":case"input:url":case"input:tel":case"textarea:textarea":case"select:select-one":i=c!=a.value&&(!r(c,a.value)&&!(""==e.trim(c)&&!a.empty));break;case"input:checkbox":case"input:radio":c=e(t+":checked").map((function(){return this.value})).get(),void 0===a.strict&&(a.strict=!1),i=c!=a.value&&(!r(c,a.value)&&(!n(c,a.value,a.strict)&&!(s(c)&&!a.empty)));break;case"select:select-multiple":i=!n(c,a.value,a.strict)&&!(null==c&&!a.empty)}return i},this.typeCompareDependency=function(t,a){var n=!1;if(void 0===e(t).prop("tagName"))return!1;e(t).prop("tagName").toLowerCase(),e(t).prop("type").toLowerCase();var r=parseInt(e(t).val());switch(a.value=parseInt(a.value),a.sign){case"<":case"lt":case"lessthen":case"less-then":case"LessThen":r<a.value&&(n=!0);break;case"<=":case"lteq":case"lessthenequal":case"less-then-equal":case"LessThenEqual":case"eqlt":r<=a.value&&(n=!0);break;case">=":case"gteq":case"greaterthenequal":case"greater-then-equal":case"GreaterThenEqual":case"eqgt":r>=a.value&&(n=!0);break;case">":case"gt":case"greaterthen":case"greater-then":case"GreaterThen":r>a.value&&(n=!0)}return n},this.typeRangeDependency=function(t,a){if(void 0===e(t).prop("tagName"))return!1;var n,r,s=!1,i=(e(t).prop("tagName").toLowerCase(),e(t).prop("type").toLowerCase(),parseInt(e(t).val()));return e.isArray(a.value)&&(n=parseInt(a.value[0]),r=parseInt(a.value[1])),void 0===a.value&&(n=parseInt(a.min),r=parseInt(a.max)),n<i&&i<r&&(s=!0),s},this.typeLengthDependency=function(t,a){if(void 0===e(parent).prop("tagName"))return!1;var n=!1,r=(e(parent).prop("tagName").toLowerCase(),e(parent).prop("type").toLowerCase(),e(parent).val().length);switch(a.value=parseInt(a.value),a.sign){case"<":case"lt":case"lessthen":case"less-then":case"LessThen":r<a.value&&(n=!0);break;case"<=":case"lteq":case"lessthenequal":case"less-then-equal":case"LessThenEqual":case"eqlt":r<=a.value&&(n=!0);break;case">=":case"gteq":case"greaterthenequal":case"greater-then-equal":case"GreaterThenEqual":case"eqgt":r>=a.value&&(n=!0);break;case">":case"gt":case"greaterthen":case"greater-then":case"GreaterThen":r>a.value&&(n=!0)}return n},this.useRuleType=function(t,a){var n=!1,r=this;e.each(a.rules,(function(e,t){switch(t.type){case"empty":n=r.typeEmptyDependency(e,t);break;case"notempty":case"not-empty":case"notEmpty":case"!empty":n=r.typeNotEmptyDependency(e,t);break;case"equal":case"==":case"=":n=r.typeEqualDependency(e,t);break;case"!equal":case"notequal":case"!=":case"not-equal":case"notEqual":n=r.typeNotEqualDependency(e,t);break;case"regexp":case"expression":case"reg":case"exp":n=r.typeRegExpDependency(e,t);break;case"compare":case"comp":n=r.typeCompareDependency(e,t);break;case"length":case"lng":n=r.typeLengthDependency(e,t);break;case"range":n=r.typeRangeDependency(e,t)}return("and"!==a.relation.toLocaleLowerCase()||!0!==n)&&(("or"!==a.relation.toLocaleLowerCase()||!1!==n)&&void 0)})),n?e(t).show("slow"):e(t).hide("slow")},this._targets.each((function(){var t=e(this),n=t.data(a._settings.attribute.replace("data-","").trim());if(n){t.addClass("has-dependent-data");var r=e.extend({rules:{},relation:"or"},n),s=Object.keys(r.rules);s.length&&(a.useRuleType(t,r),e(document.body).on("input change",e(s.join(",")),(function(e){a.useRuleType(t,r)})))}}))}}(jQuery);
